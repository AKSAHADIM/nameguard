# NameGuard Configuration File
# version: 3.1 (Heuristic Scoring + Strict Network Gating)

# --- Kebijakan Verifikasi (Verification Policy) ---
verification:
  # Jika true, pemain Bedrock tidak bisa memakai nama yang sudah di-bind oleh Java,
  # dan pemain Java tidak bisa memakai nama yang sudah di-bind oleh Bedrock.
  crossEditionLock: true

  # Jumlah maksimum fingerprint yang disimpan per pemain (rolling window).
  # 5-10 direkomendasikan.
  rollingFpLimit: 5

  # Durasi (dalam hari) sebelum fingerprint lama yang tidak terpakai dihapus.
  # 0 untuk menonaktifkan.
  fingerprintPurgeDays: 90

  # --- Mode Strict (Baru) ---
  # Bagian ini menambahkan aturan ekstra agar login dari jaringan benar-benar berbeda tidak langsung lolos.
  strict:
    # Jika true: Dibutuhkan minimal kecocokan sinyal jaringan (prefix/ASN/PTR) untuk hard allow.
    # Jika false: Skor bisa hard allow hanya dari sinyal klien (lebih longgar).
    requireNetworkOverlap: true

    # Minimum jumlah sinyal jaringan yang cocok (0..3) agar eligible mendapat hard_allow.
    # Jika < nilai ini maka skor akan diturunkan (dipaksa di bawah hard_allow).
    minNetworkMatchesForHardAllow: 1

    # Jika true: binding dengan trust HIGH atau LOCKED boleh hard allow meski 0 network match.
    # Jika false: tetap memerlukan setidaknya 1 network match.
    allowZeroNetworkForTrustHigh: false

  # --- Pengaturan Skoring Heuristik (Heuristic Scoring) ---
  # Re-balanced untuk mencegah client-only hard allow.
  similarity:
    # Skor minimal untuk diizinkan masuk tanpa peringatan (hard allow).
    hard_allow: 78

    # Skor minimal untuk diizinkan masuk tetapi fingerprint baru akan dipelajari (soft allow).
    soft_allow: 45

    # Jika skor < soft_allow, login akan DITOLAK.

  # Bobot skor untuk setiap sinyal.
  weights:
    # Sinyal non-jaringan (Client / Identity)
    deviceos_weight: 20
    brand_weight: 15
    edition_weight: 10

    # Sinyal jaringan (Heuristik) – dinaikkan agar faktor lokasi / provider berpengaruh
    subnet_weight: 25
    pseudo_asn_weight: 12
    ptr_domain_weight: 8
    ip_version_weight: 5

# --- Keamanan (Security) ---
security:
  # SALT UNTUK HMAC-SHA256
  # GANTI INI DENGAN STRING ACAK YANG PANJANG DAN RAHASIA!
  # Mengubah salt akan membuat semua fingerprint jaringan lama menjadi tidak valid (efek: forced re-verification).
  salt: "vWLTFPtdyYbqLMgFuqt2DecUjb1UP4ZT"

  # Pesan umum kick (placeholder {reason} akan diganti).
  kickMessage: "&c[NameGuard]\\n&fKoneksi Anda ditolak.\\n&7Alasan: {reason}"

  # Alasan spesifik (dipakai untuk substitusi {reason})
  reasons:
    hardMismatch: "Identitas login tidak cocok dengan pemilik nama (Fingerprint terlalu berbeda)."
    crossEditionLock: "Nama ini dikunci untuk edisi game yang berbeda (Java/Bedrock)."
    rateLimited: "Terlalu banyak percobaan login gagal. Coba lagi nanti."
    confusableName: "Nama Anda terlalu mirip dengan nama yang sudah dilindungi."
    internalError: "Terjadi error internal saat verifikasi."

  # Rate limiter untuk percobaan gagal per IP.
  rateLimit:
    enabled: true
    attempts: 5
    blockDurationSeconds: 300 # 5 menit

# --- Pesan (Messages) ---
messages:
  protectionSuccess: "§a[NameGuard] Identitas namamu sekarang dilindungi. Perubahan ekstrem pada jaringan dapat memicu verifikasi ulang."
  adminMismatchNotify: "§c[NameGuard] &ePemain {player} §cdiblokir (HARD_MISMATCH). Jika ini pemain asli, periksa jaringan atau gunakan §f/ng bind {player}"

# --- Debug ---
debug:
  logFailedAttempts: true
